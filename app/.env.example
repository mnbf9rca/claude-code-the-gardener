# ============================================================================
# CRITICAL: Data Persistence Configuration
# ============================================================================
# WARNING: The install-mcp-server.sh script DELETES the entire application
# directory during updates. You MUST configure data storage outside the app
# directory to prevent data loss.
#
# REQUIRED: Both DATA_DIR and CAMERA_SAVE_PATH must be set.
# ============================================================================

# REQUIRED: Directory for JSONL history files (plant_status, water_pump, etc.)
# Relative paths are resolved from the app directory (/home/mcpserver/plant-care-app)
# Recommended: Use ../data to store in /home/mcpserver/data (outside app dir)
DATA_DIR=../data

# REQUIRED: Directory for captured photos
# Recommended: Use ../photos to store in /home/mcpserver/photos (outside app dir)
CAMERA_SAVE_PATH=../photos

# Alternative: Use absolute paths for explicit control
# DATA_DIR=/var/lib/plant-care/data
# CAMERA_SAVE_PATH=/var/lib/plant-care/photos

# ============================================================================
# MCP Server Configuration
# ============================================================================
# Host to bind to (0.0.0.0 for all interfaces, 127.0.0.1 for localhost only)
MCP_HOST=0.0.0.0
# Port for HTTP server
MCP_PORT=8000
# Public hostname/IP for photo URLs (e.g., localhost, raspberry.local, 192.168.1.100)
MCP_PUBLIC_HOST=localhost
# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL (default: INFO)
LOG_LEVEL=INFO

# ============================================================================
# Camera Configuration
# ============================================================================
CAMERA_ENABLED=true
# USB camera index (0 for first camera, 1 for second, etc.)
CAMERA_DEVICE_INDEX=0
# Image width in pixels
CAMERA_IMAGE_WIDTH=1920
# Image height in pixels
CAMERA_IMAGE_HEIGHT=1080
# JPEG quality (1-100)
CAMERA_IMAGE_QUALITY=85
# Timeout in seconds for camera capture
CAMERA_CAPTURE_TIMEOUT=5

# Platform-specific settings
# On Mac: typically use 0 or 1
# On Raspberry Pi: typically use 0 for /dev/video0, 1 for /dev/video1, etc.

# ============================================================================
# Camera Buffer & Timing Configuration
# ============================================================================
# Number of frames to read and discard before capturing (clears stale buffer)
# Higher values = clearer buffer but slower capture
# Recommended: 10 for cameras that sit idle between captures (10-minute intervals)
CAMERA_BUFFER_FLUSH_FRAMES=10

# Camera warm-up delay in milliseconds (allows sensor to stabilize after opening)
# Recommended: 100-200ms
CAMERA_WARMUP_MS=150

# ============================================================================
# Camera Focus Configuration (Raspberry Pi only)
# ============================================================================
# Focus is configured at the system level using v4l2-ctl, not via code.
# See app/docs/camera_setup.md for instructions on:
#   1. Finding the optimal focus value for your setup
#   2. Configuring persistent focus settings with v4l2-ctl
#   3. Making settings persist across reboots

# Home Assistant Configuration
HOME_ASSISTANT_URL=http://homeassistant.local:8123
HOME_ASSISTANT_TOKEN=your_long_lived_access_token_here
LIGHT_ENTITY_ID=switch.smart_plug_mini

# ESP32 Controller Configuration
# IP address or hostname of the ESP32 plant controller
ESP32_HOST=192.168.1.100
# HTTP port (default: 80)
ESP32_PORT=80
# Pump calibration: milliliters dispensed per second of pump operation
# Calibrate by running pump for 30 seconds and measuring water dispensed
# Example: 30s dispenses 27ml = 0.9 ml/s
# NOTE: ESP32 has 30s safety limit, so max dispense is ~25-27ml per event
PUMP_ML_PER_SECOND=0.9

# Email Notifications (Optional)
# Configure SMTP to receive email notifications when the agent sends you messages
# If not configured, email notifications are gracefully skipped
#
# REQUIRED for email notifications:
# SMTP server hostname (e.g., smtp.gmail.com, localhost)
SMTP_HOST=smtp.gmail.com
# Email address to send notifications to
SMTP_TO=recipient@example.com
# From address (must be explicitly set)
SMTP_FROM=plant-care@example.com
#
# OPTIONAL (only needed if SMTP server requires authentication):
# SMTP username (usually your email address)
SMTP_USER=your-email@gmail.com
# SMTP password or app-specific password
SMTP_PASSWORD=your-app-password
#
# OPTIONAL (advanced):
# SMTP port (default: 587 for STARTTLS, 25 for plain SMTP)
SMTP_PORT=587
# Use STARTTLS (default: true for port 587, false for port 25)
SMTP_USE_TLS=true
